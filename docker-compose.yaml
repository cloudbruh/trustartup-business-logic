services:
  business-logic:
    build: .
    extra_hosts:
      - "host.docker.internal:host-gateway"
    volumes:
      - ./:/var/www/html/
    environment:
      - APP_ENV=production
      - APP_KEY=yIcTghI5UqQY6z3IjTCupEbHMYPH73gJ
      - APP_DEBUG=true
      - API_BUSINESS_CONTENT=http://host.docker.internal:8086
      - API_FEED_CONTENT=http://host.docker.internal:8081
      - API_MEDIA=http://host.docker.internal:8083
      - API_USER=http://host.docker.internal:8084
      - API_PAYMENT=http://host.docker.internal:8091
    command: [ "/bin/sh", "-c", "php -S 0.0.0.0:80 -t public" ]
    ports:
      - "8090:80"
